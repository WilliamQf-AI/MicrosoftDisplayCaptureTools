namespace SamplePlugin
{
    struct CaptureCapabilities
    {
        Boolean getImage;
        Single tolerance; // percentage error allowed - set 0 for raw capture.
    };

    enum PixelFormat
    {
        RGB8 = 0,
        RGB16 = 1
    };

    enum DeviceInputState
    {
        NotActive = 0,
        Active = 1,
        Pending = 2
    };

    struct FrameCharacteristics
    {
        UInt32 height;
        UInt32 width;
        PixelFormat format;
        UInt32 stride;
        UInt32 byteCount;
    };

    runtimeclass GraphicsCapturePlugin
    {
        GraphicsCapturePlugin();
        GraphicsCaptureDeviceInput InitializeCaptureInput(UInt32 displayId);

        UInt32 GetCaptureInputCount();
        void GetCaptureInputDisplayIds(ref UInt32[] captureInputUniqueId);
    }

    runtimeclass GraphicsCaptureDeviceInput
    {
        GraphicsCaptureDeviceInput(UInt32 captureInputUniqueId, GraphicsCapturePlugin plugin);

        DeviceInputState GetState();
        CaptureCapabilities GetCaptureCaps();
        GraphicsCapturedFrame CaptureFrame();

        UInt32 UniqueId { get; };
    }

    runtimeclass GraphicsCapturedFrame
    {
        GraphicsCapturedFrame(FrameCharacteristics frameCharacteristics);
        FrameCharacteristics GetFrameCharacteristics();
        void GetFramePixels(ref UInt8[] buffer);
    }
}
